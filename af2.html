<html>
  <head>
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script src="https://sdk.altvr.com/libs/altspace.js/2.8.0/altspace.min.js"></script>
    <script src="https://unpkg.com/aframe-physics-system@1.4.0/dist/aframe-physics-system.min.js"></script>
    <script src="js/foo-component.js"></script>
  </head>
  <body>
    <a-scene altspace='vertical-align: bottom;' sync-system="author: altspacevr; app: asvr-test;refUrl:https://asvr-test.firebaseio.com;">
         <!-- preload all our textures -->
    <a-assets>
        <img id='card_back_texture' src='images/back.jpg'/>
        <img id='major' src='images/Rider-Waite-Smith_deck.png'/>
       <!-- <img id='minor' src='images/Rider-Waite-Smith_deck.png'/>-->
    </a-assets>
             <a-entity hello-world></a-entity>
            <a-entity  id="_1"  position="0 1 0"   rotation="90 0 0" class="tarot_card" sync-transform altspace-cursor-collider='enabled: true' sync='own-on: click'>
            <a-entity  geometry="primitive: plane;height: .5; width:.25" position="0 0 -.001" material="side: double;src:#card_back_texture; repeat: 1 1"></a-entity>             
            <a-entity id="the_moon" geometry="primitive: plane;height: .5; width:.25" position="0 0 0" material="side: double;src:#major; repeat: .165 .25;offset: 0 0;"></a-entity>
            
            <a-animation attribute="position"
            dur="3000"
            fill="both"
            from="0 2 0"
            to="0 1 0"
            repeat="0"  direction="forward" delay="5000" begin="poopevent"></a-animation>              
          
                      
                 <!--     -->
            <a-animation attribute="rotation"
            dur="3000"
            fill="forwards"
            
            to="-90 0 0"
            repeat="0" delay="3000" direction="forward" begin="poopevent"></a-animation>


          
            <a-animation attribute="position"
            dur="3000"
            fill="both"
            from="0 1 0"
            to="0 2 0"
            repeat="0" id="pp3" direction="forward" begin="poopevent"></a-animation>
          </a-entity>
     
            <a-entity  id="_2"  position=".4 1 0"   rotation="90 0 0" class="tarot_card" sync sync-transform>
                <a-entity  geometry="primitive: plane;height: .5; width:.25" position="0 0 -.001" material="side: double;src:#card_back_texture; repeat: 1 1"></a-entity>             
                <a-entity id="the_sun" geometry="primitive: plane;height: .5; width:.25" position="0 0 0" material="side: double;src:#major; repeat: .165 .25; offset: .165 0;"></a-entity>
                 <!--   
               <a-animation id= attribute="rotation"
                    dur="5000"
                    fill="forwards"
                    to="-90 0 0"
                    repeat="0" direction="forward" delay="4000"></a-animation>
                    -->
                <a-animation attribute="position"
                dur="3000"
                fill="both"
                from=".4 2 0"
                to=".4 1 0"
                repeat="0"  direction="forward" delay="5000" begin="peeevent"></a-animation>              
              
                          
                     <!--     -->
                <a-animation attribute="rotation"
                dur="3000"
                fill="forwards"
                
                to="-90 0 0"
                repeat="0" delay="3000" direction="forward" begin="peeevent"></a-animation>
 

              
                <a-animation attribute="position"
                dur="3000"
                fill="both"
                from=".4 1 0"
                to=".4 2 0"
                repeat="0" id="pp3" direction="forward" begin="peeevent"></a-animation>
              
              </a-entity>
<!--
            <a-entity visible="false" id="o_box" box="width: 0.5; height: 0.25; depth: 1; color: orange;"
            position="0 2 0" altspace-cursor-collider='enabled: true' sync='own-on: click'></a-entity>
-->
    </a-scene>
    <script>
//console.log(document.querySelector('#roto_ani').sceneEl.object3D);ol
var sceneEl = document.querySelector('a-scene');
      //sceneEl.querySelector('.tarot_card').setAttribute('rotation', '90 0 0');
      var roto_ani2 = sceneEl.querySelector('#_1');
      var clickable_card = sceneEl.querySelector('#_2');
roto_ani2.addEventListener('click', function (event) {
  console.log('ani started', event);
  roto_ani2.emit('poopevent', 'text', true);
});

roto_ani2.addEventListener('poopevent', function (event) {
  console.log('poop!', event);
 
});


clickable_card.addEventListener('peeevent', function (event) {
  console.log('pee!', event);
 
}); 
clickable_card.addEventListener('click', function (event) {
  console.log('ani2 started', event);
  clickable_card.emit('peeevent', 'text', true);
});
/*
var fanned_cards = sceneEl.querySelectorAll('.fanned_cards');
var the_card;
for (var i = 0; i < fanned_cards.length; i++) {
 // console.log(els[i]);
 the_card = eval(fanned_cards[i]);
 the_card.addEventListener('mouseenter', function (event) {
        console.log('enter!!!!', event);
        the_card.setAttribute('color', '#FF9500');
       
       
      });
      the_card.addEventListener('mouseleave', function (event) {
        console.log('enter!!!!', event);
        the_card.setAttribute('color', false);
       
      });


}

*/

    </script>
  </body>
</html>